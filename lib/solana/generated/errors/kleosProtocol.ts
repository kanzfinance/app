/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  isProgramError,
  type Address,
  type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM,
  type SolanaError,
} from "@solana/kit";
import { KLEOS_PROTOCOL_PROGRAM_ADDRESS } from "../programs";

/** InvalidProtocolFeeBps: Protocol fee bps must be between 0 and 10000. */
export const KLEOS_PROTOCOL_ERROR__INVALID_PROTOCOL_FEE_BPS = 0x1770; // 6000
/** Unauthorized: Unauthorized access. */
export const KLEOS_PROTOCOL_ERROR__UNAUTHORIZED = 0x1771; // 6001
/** ProtocolPaused: Protocol is paused. */
export const KLEOS_PROTOCOL_ERROR__PROTOCOL_PAUSED = 0x1772; // 6002
/** InvalidMarketState: Market is not in the required state. */
export const KLEOS_PROTOCOL_ERROR__INVALID_MARKET_STATE = 0x1773; // 6003
/** InvalidTimestamp: Invalid timestamp. */
export const KLEOS_PROTOCOL_ERROR__INVALID_TIMESTAMP = 0x1774; // 6004
/** InvalidItemIndex: Invalid item index. */
export const KLEOS_PROTOCOL_ERROR__INVALID_ITEM_INDEX = 0x1775; // 6005
/** InvalidStakeAmount: Invalid stake amount. */
export const KLEOS_PROTOCOL_ERROR__INVALID_STAKE_AMOUNT = 0x1776; // 6006
/** EffectiveStakeTooLarge: Effective stake exceeds allowed multiplier. */
export const KLEOS_PROTOCOL_ERROR__EFFECTIVE_STAKE_TOO_LARGE = 0x1777; // 6007
/** AlreadyClaimed: Position already claimed. */
export const KLEOS_PROTOCOL_ERROR__ALREADY_CLAIMED = 0x1778; // 6008
/** MarketAlreadySettled: Market already settled. */
export const KLEOS_PROTOCOL_ERROR__MARKET_ALREADY_SETTLED = 0x1779; // 6009
/** MathOverflow: Math overflow occurred. */
export const KLEOS_PROTOCOL_ERROR__MATH_OVERFLOW = 0x177a; // 6010

export type KleosProtocolError =
  | typeof KLEOS_PROTOCOL_ERROR__ALREADY_CLAIMED
  | typeof KLEOS_PROTOCOL_ERROR__EFFECTIVE_STAKE_TOO_LARGE
  | typeof KLEOS_PROTOCOL_ERROR__INVALID_ITEM_INDEX
  | typeof KLEOS_PROTOCOL_ERROR__INVALID_MARKET_STATE
  | typeof KLEOS_PROTOCOL_ERROR__INVALID_PROTOCOL_FEE_BPS
  | typeof KLEOS_PROTOCOL_ERROR__INVALID_STAKE_AMOUNT
  | typeof KLEOS_PROTOCOL_ERROR__INVALID_TIMESTAMP
  | typeof KLEOS_PROTOCOL_ERROR__MARKET_ALREADY_SETTLED
  | typeof KLEOS_PROTOCOL_ERROR__MATH_OVERFLOW
  | typeof KLEOS_PROTOCOL_ERROR__PROTOCOL_PAUSED
  | typeof KLEOS_PROTOCOL_ERROR__UNAUTHORIZED;

let kleosProtocolErrorMessages: Record<KleosProtocolError, string> | undefined;
if (process.env.NODE_ENV !== "production") {
  kleosProtocolErrorMessages = {
    [KLEOS_PROTOCOL_ERROR__ALREADY_CLAIMED]: `Position already claimed.`,
    [KLEOS_PROTOCOL_ERROR__EFFECTIVE_STAKE_TOO_LARGE]: `Effective stake exceeds allowed multiplier.`,
    [KLEOS_PROTOCOL_ERROR__INVALID_ITEM_INDEX]: `Invalid item index.`,
    [KLEOS_PROTOCOL_ERROR__INVALID_MARKET_STATE]: `Market is not in the required state.`,
    [KLEOS_PROTOCOL_ERROR__INVALID_PROTOCOL_FEE_BPS]: `Protocol fee bps must be between 0 and 10000.`,
    [KLEOS_PROTOCOL_ERROR__INVALID_STAKE_AMOUNT]: `Invalid stake amount.`,
    [KLEOS_PROTOCOL_ERROR__INVALID_TIMESTAMP]: `Invalid timestamp.`,
    [KLEOS_PROTOCOL_ERROR__MARKET_ALREADY_SETTLED]: `Market already settled.`,
    [KLEOS_PROTOCOL_ERROR__MATH_OVERFLOW]: `Math overflow occurred.`,
    [KLEOS_PROTOCOL_ERROR__PROTOCOL_PAUSED]: `Protocol is paused.`,
    [KLEOS_PROTOCOL_ERROR__UNAUTHORIZED]: `Unauthorized access.`,
  };
}

export function getKleosProtocolErrorMessage(code: KleosProtocolError): string {
  if (process.env.NODE_ENV !== "production") {
    return (kleosProtocolErrorMessages as Record<KleosProtocolError, string>)[
      code
    ];
  }

  return "Error message not available in production bundles.";
}

export function isKleosProtocolError<
  TProgramErrorCode extends KleosProtocolError,
>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode,
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> &
  Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(
    error,
    transactionMessage,
    KLEOS_PROTOCOL_PROGRAM_ADDRESS,
    code,
  );
}
